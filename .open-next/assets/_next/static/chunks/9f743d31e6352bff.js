(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28923,e=>{"use strict";var a=e.i(43476),t=e.i(22016),s=e.i(71645),r=e.i(68694),i=e.i(18566);function l({aberto:e,onFechar:t}){let[l,n]=(0,s.useState)(""),[o,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(!1),x=(0,i.useRouter)();if(!e)return null;let h=async()=>{if(u(""),!l||!o)return void u("Preencha todos os campos");if(l!==o)return void u("As senhas não coincidem");m(!0);let e=(0,r.criarSupabaseNavegador)(),{error:a}=await e.auth.updateUser({password:l});(m(!1),a)?u(a.message):(t(),x.push("/"))};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl bg-black/90 p-6 text-white shadow-lg",children:[(0,a.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Redefinir senha"}),c&&(0,a.jsx)("p",{className:"mb-3 text-red-400",children:c}),(0,a.jsx)("input",{type:"password",placeholder:"Nova senha",value:l,onChange:e=>n(e.target.value),className:"mb-3 w-full rounded-lg border border-white/20 bg-black/80 px-4 py-2 text-white outline-none"}),(0,a.jsx)("input",{type:"password",placeholder:"Confirmar nova senha",value:o,onChange:e=>d(e.target.value),className:"mb-3 w-full rounded-lg border border-white/20 bg-black/80 px-4 py-2 text-white outline-none"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:t,className:"rounded-lg border border-white/20 px-4 py-2 text-sm hover:bg-white/10 transition",children:"Cancelar"}),(0,a.jsx)("button",{onClick:h,disabled:p,className:"rounded-lg bg-purple-500 px-4 py-2 text-sm text-white hover:bg-purple-600 transition",children:p?"Redefinindo...":"Redefinir"})]})]})})}function n({label:e,value:t}){return(0,a.jsxs)("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-4 transition hover:scale-[1.02] hover:border-white/20 animate-float",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-cyan-500/10 opacity-0 transition group-hover:opacity-100 neon-pulse"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/60",children:e}),(0,a.jsx)("div",{className:"mt-1 text-lg",children:t})]})]})}function o(){let[e,r]=(0,s.useState)(null),[i,o]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{!async function(){let e=await fetch("/api/minha-conta");if(!e.ok){window.location.href="/login?retorno=/minha-conta";return}r(await e.json())}()},[]),!e)return null;let d=e.usuario.user_metadata?.display_name?.trim()||e.usuario.email.split("@")[0].toLowerCase()||"usuário",c=e.usuario.email.toLowerCase();return(0,a.jsxs)("main",{className:"relative mx-auto w-full max-w-6xl px-4 py-10",children:[(0,a.jsxs)("section",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsx)(n,{label:"Nome",value:d}),(0,a.jsx)(n,{label:"Email",value:c}),(0,a.jsx)(n,{label:"Downloads",value:String(e.totalDownloads??0)}),(0,a.jsx)(n,{label:"Assinatura",value:e.labelAssinatura})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>o(!0),className:"group relative overflow-hidden rounded-xl border border-white/15 bg-white/5 px-5 py-2 text-sm font-medium transition hover:scale-[1.03] neon-pulse",children:[(0,a.jsx)("span",{className:"relative z-10",children:"Redefinir senha"}),(0,a.jsx)("span",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/30 to-cyan-500/30 opacity-0 transition group-hover:opacity-100"})]}),"inativa"===e.statusAssinatura?(0,a.jsxs)(t.default,{href:"/assinaturas",className:"group relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 px-6 py-2 text-sm text-black transition hover:scale-[1.05] neon-pulse",children:[(0,a.jsx)("span",{className:"relative z-10 flex items-center gap-2",children:"⚡ Assinar agora"}),(0,a.jsx)("span",{className:"absolute inset-0 blur-xl opacity-50 group-hover:opacity-80 bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500"})]}):(0,a.jsxs)("span",{className:"rounded-full border border-emerald-400/30 bg-emerald-400/10 px-4 py-1.5 text-xs text-emerald-300 neon-pulse",children:["✔ ",e.labelAssinatura]})]}),(0,a.jsx)(l,{aberto:i,onFechar:()=>o(!1)}),(0,a.jsxs)("section",{className:"mt-10 rounded-3xl border border-white/10 bg-white/5 p-5 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg",children:"Meus downloads"}),(0,a.jsxs)("span",{className:"text-xs text-white/60",children:[e.totalDownloads??0," no total"]})]}),0===e.listaDownloads.length?(0,a.jsx)("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-8 text-center text-sm text-white/70 animate-float",children:"Nenhum download encontrado"}):(0,a.jsx)("ul",{className:"space-y-3",children:e.listaDownloads.map(e=>(0,a.jsxs)("li",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-black/40 p-4 transition hover:scale-[1.02] hover:border-white/25 animate-float",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-0 transition group-hover:opacity-100",children:(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 via-cyan-500/20 to-pink-500/20 blur-xl neon-pulse"})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"truncate text-sm",children:e.item?.nome??"Item removido"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-xs text-white/70",children:[(0,a.jsx)("span",{children:new Date(e.criado_em).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})}),e.item?.tipo&&(0,a.jsx)("span",{className:"rounded-full bg-white/10 px-2 py-0.5 text-[10px] uppercase tracking-widest neon-pulse",children:function(e){switch(e){case"plugin":return"Plugin";case"drum-kit":return"Drum-Kit";case"daw":return"DAW";case"programa":return"Programa"}}(e.item.tipo)})]})]})]},e.id))})]})]})}e.s(["default",()=>o],28923)}]);