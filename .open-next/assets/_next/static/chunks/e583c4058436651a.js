(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82705,e=>{"use strict";var r=e.i(43476),a=e.i(71645);function t({message:e,type:t,onClose:i,duration:s=1e4}){return(0,a.useEffect)(()=>{let e=setTimeout(i,s);return()=>clearTimeout(e)},[i,s]),(0,r.jsx)("div",{className:"fixed top-16 left-1/2 z-50 -translate-x-1/2 animate-[slideIn_0.35s_ease-out]",children:(0,r.jsx)("div",{className:`rounded-xl border bg-black/80 px-4 py-3 text-sm backdrop-blur ${{success:"border-green-400/40 text-green-300 shadow-[0_0_25px_rgba(34,197,94,0.45)]",error:"border-red-500/40 text-red-300 shadow-[0_0_25px_rgba(239,68,68,0.45)]",info:"border-cyan-400/40 text-cyan-300 shadow-[0_0_25px_rgba(34,211,238,0.45)]"}[t]}`,children:e})})}e.s(["CyberToast",()=>t])},94542,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(18566),i=e.i(68694),s=e.i(82705);async function o(e,r){let{data:a}=await e.from("assinaturas").select("*").eq("usuario_id",r).maybeSingle();a?.periodo_fim&&new Date(a.periodo_fim)<new Date&&await e.from("assinaturas").update({status:"inativa",tipo:null,periodo_fim:null}).eq("usuario_id",r)}function n(){let e=(0,a.useMemo)(()=>(0,i.criarSupabaseNavegador)(),[]),n=(0,t.useRouter)(),l=(0,t.useSearchParams)(),u=l.get("redirect")||l.get("retorno")||"/",[d,c]=(0,a.useState)("entrar"),[m,p]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[b,g]=(0,a.useState)(""),[f,w]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null);function N(e,r="info"){v({message:e,type:r})}async function _(r){r.preventDefault(),w(!0);try{let{error:r,data:a}=await e.auth.signInWithPassword({email:h.trim(),password:b});if(r||!a.user){w(!1),N("Não foi possível entrar. Verifique seus dados ou confirme seu e-mail.","error");return}await o(e,a.user.id),n.replace(u)}catch{w(!1),N("Erro inesperado ao tentar entrar.","error")}}async function j(r){r.preventDefault(),w(!0);let a=m.trim().replace(/\s+/g," ");if(a.length<2){w(!1),N("Informe um nome válido.","error");return}if(b.length<6){w(!1),N("Senha deve ter no mínimo 6 caracteres.","error");return}try{let{error:r}=await e.auth.signUp({email:h.trim(),password:b,options:{data:{display_name:a},emailRedirectTo:`${window.location.origin}/login`}});if(w(!1),r)return void N("Erro ao tentar criar conta.","error");N("Cadastro realizado! Verifique seu e-mail para confirmar seu cadastro.","info")}catch{w(!1),N("Erro inesperado ao criar conta.","error")}}async function C(){if(!h)return void N("Informe seu e-mail para redefinir a senha.","info");w(!0);try{await e.auth.resetPasswordForEmail(h,{redirectTo:`${window.location.origin}/redefinir-senha`}),w(!1),N("Se este e-mail estiver cadastrado, enviaremos um link.","info")}catch{w(!1),N("Erro ao enviar e-mail de redefinição.","error")}}return(0,r.jsxs)("main",{className:"mx-auto w-full max-w-md px-4 py-10",children:[(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 backdrop-blur",children:[(0,r.jsx)("h1",{className:"text-2xl tracking-tight",children:"FonteDosPlugins"}),(0,r.jsxs)("div",{className:"mt-5 grid grid-cols-2 gap-2 rounded-xl border border-white/10 bg-black/20 p-1",children:[(0,r.jsx)("button",{type:"button",onClick:()=>c("entrar"),className:`rounded-lg px-3 py-2 text-sm ${"entrar"===d?"bg-white/10":"hover:bg-white/5"}`,children:"Entrar"}),(0,r.jsx)("button",{type:"button",onClick:()=>c("criar"),className:`rounded-lg px-3 py-2 text-sm ${"criar"===d?"bg-white/10":"hover:bg-white/5"}`,children:"Criar conta"})]}),(0,r.jsxs)("form",{onSubmit:"entrar"===d?_:j,className:"mt-4 space-y-3",children:["criar"===d&&(0,r.jsx)("input",{value:m,onChange:e=>p(e.target.value),placeholder:"Nome de usuário",className:"w-full rounded-xl bg-black/30 px-3 py-2 text-sm"}),(0,r.jsx)("input",{value:h,onChange:e=>x(e.target.value),type:"email",placeholder:"Email",required:!0,className:"w-full rounded-xl bg-black/30 px-3 py-2 text-sm"}),(0,r.jsx)("input",{value:b,onChange:e=>g(e.target.value),type:"password",placeholder:"Senha",required:!0,className:"w-full rounded-xl bg-black/30 px-3 py-2 text-sm"}),"entrar"===d&&(0,r.jsx)("button",{type:"button",onClick:C,className:"text-xs text-cyan-400 hover:underline",children:"Esqueci minha senha"}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"w-full rounded-xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15",children:f?"Processando...":"entrar"===d?"Entrar":"Criar conta"})]})]}),y&&(0,r.jsx)(s.CyberToast,{message:y.message,type:y.type,onClose:()=>v(null)})]})}e.s(["default",()=>n])}]);