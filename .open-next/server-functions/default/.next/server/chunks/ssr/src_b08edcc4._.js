module.exports=[25642,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({message:a,type:d,onClose:e,duration:f=1e4}){return(0,c.useEffect)(()=>{let a=setTimeout(e,f);return()=>clearTimeout(a)},[e,f]),(0,b.jsx)("div",{className:"fixed top-16 left-1/2 z-50 -translate-x-1/2 animate-[slideIn_0.35s_ease-out]",children:(0,b.jsx)("div",{className:`rounded-xl border bg-black/80 px-4 py-3 text-sm backdrop-blur ${{success:"border-green-400/40 text-green-300 shadow-[0_0_25px_rgba(34,197,94,0.45)]",error:"border-red-500/40 text-red-300 shadow-[0_0_25px_rgba(239,68,68,0.45)]",info:"border-cyan-400/40 text-cyan-300 shadow-[0_0_25px_rgba(34,211,238,0.45)]"}[d]}`,children:a})})}a.s(["CyberToast",()=>d])},93482,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(55679),f=a.i(25642);async function g(a,b){let{data:c}=await a.from("assinaturas").select("*").eq("usuario_id",b).maybeSingle();c?.periodo_fim&&new Date(c.periodo_fim)<new Date&&await a.from("assinaturas").update({status:"inativa",tipo:null,periodo_fim:null}).eq("usuario_id",b)}function h(){let a=(0,c.useMemo)(()=>(0,e.criarSupabaseNavegador)(),[]),h=(0,d.useRouter)(),i=(0,d.useSearchParams)(),j=i.get("redirect")||i.get("retorno")||"/",[k,l]=(0,c.useState)("entrar"),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null);function w(a,b="info"){v({message:a,type:b})}async function x(b){b.preventDefault(),t(!0);try{let{error:b,data:c}=await a.auth.signInWithPassword({email:o.trim(),password:q});if(b||!c.user){t(!1),w("Não foi possível entrar. Verifique seus dados ou confirme seu e-mail.","error");return}await g(a,c.user.id),h.replace(j)}catch{t(!1),w("Erro inesperado ao tentar entrar.","error")}}async function y(b){b.preventDefault(),t(!0);let c=m.trim().replace(/\s+/g," ");if(c.length<2){t(!1),w("Informe um nome válido.","error");return}if(q.length<6){t(!1),w("Senha deve ter no mínimo 6 caracteres.","error");return}try{let{error:b}=await a.auth.signUp({email:o.trim(),password:q,options:{data:{display_name:c},emailRedirectTo:`${window.location.origin}/login`}});if(t(!1),b)return void w("Erro ao tentar criar conta.","error");w("Cadastro realizado! Verifique seu e-mail para confirmar seu cadastro.","info")}catch{t(!1),w("Erro inesperado ao criar conta.","error")}}async function z(){if(!o)return void w("Informe seu e-mail para redefinir a senha.","info");t(!0);try{await a.auth.resetPasswordForEmail(o,{redirectTo:`${window.location.origin}/redefinir-senha`}),t(!1),w("Se este e-mail estiver cadastrado, enviaremos um link.","info")}catch{t(!1),w("Erro ao enviar e-mail de redefinição.","error")}}return(0,b.jsxs)("main",{className:"mx-auto w-full max-w-md px-4 py-10",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 backdrop-blur",children:[(0,b.jsx)("h1",{className:"text-2xl tracking-tight",children:"FonteDosPlugins"}),(0,b.jsxs)("div",{className:"mt-5 grid grid-cols-2 gap-2 rounded-xl border border-white/10 bg-black/20 p-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>l("entrar"),className:`rounded-lg px-3 py-2 text-sm ${"entrar"===k?"bg-white/10":"hover:bg-white/5"}`,children:"Entrar"}),(0,b.jsx)("button",{type:"button",onClick:()=>l("criar"),className:`rounded-lg px-3 py-2 text-sm ${"criar"===k?"bg-white/10":"hover:bg-white/5"}`,children:"Criar conta"})]}),(0,b.jsxs)("form",{onSubmit:"entrar"===k?x:y,className:"mt-4 space-y-3",children:["criar"===k&&(0,b.jsx)("input",{value:m,onChange:a=>n(a.target.value),placeholder:"Nome de usuário",className:"w-full rounded-xl bg-black/30 px-3 py-2 text-sm"}),(0,b.jsx)("input",{value:o,onChange:a=>p(a.target.value),type:"email",placeholder:"Email",required:!0,className:"w-full rounded-xl bg-black/30 px-3 py-2 text-sm"}),(0,b.jsx)("input",{value:q,onChange:a=>r(a.target.value),type:"password",placeholder:"Senha",required:!0,className:"w-full rounded-xl bg-black/30 px-3 py-2 text-sm"}),"entrar"===k&&(0,b.jsx)("button",{type:"button",onClick:z,className:"text-xs text-cyan-400 hover:underline",children:"Esqueci minha senha"}),(0,b.jsx)("button",{type:"submit",disabled:s,className:"w-full rounded-xl bg-white/10 px-4 py-2 text-sm hover:bg-white/15",children:s?"Processando...":"entrar"===k?"Entrar":"Criar conta"})]})]}),u&&(0,b.jsx)(f.CyberToast,{message:u.message,type:u.type,onClose:()=>v(null)})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=src_b08edcc4._.js.map